<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The Cycling Infrastructure Prioritisation Toolkit: Manual</title>
  <meta name="description" content="This is the manual of the Cycling Infrastructure Prioritisation Toolkit (CyIPT).">
  <meta name="generator" content="bookdown 0.7.1 and GitBook 2.6.7">

  <meta property="og:title" content="The Cycling Infrastructure Prioritisation Toolkit: Manual" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the manual of the Cycling Infrastructure Prioritisation Toolkit (CyIPT)." />
  <meta name="github-repo" content="cyipt/cyipt-website" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The Cycling Infrastructure Prioritisation Toolkit: Manual" />
  
  <meta name="twitter:description" content="This is the manual of the Cycling Infrastructure Prioritisation Toolkit (CyIPT)." />
  

<meta name="author" content="The CyIPT team">


<meta name="date" content="2018-03-19">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="layer-descriptions.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The CyIPT Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#the-cyipt-team"><i class="fa fa-check"></i>The CyIPT Team</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="how-cyipt-works.html"><a href="how-cyipt-works.html"><i class="fa fa-check"></i><b>2</b> How CyIPT works</a></li>
<li class="chapter" data-level="3" data-path="key-concepts.html"><a href="key-concepts.html"><i class="fa fa-check"></i><b>3</b> Key concepts</a><ul>
<li class="chapter" data-level="3.1" data-path="key-concepts.html"><a href="key-concepts.html#accuracy"><i class="fa fa-check"></i><b>3.1</b> Accuracy</a></li>
<li class="chapter" data-level="3.2" data-path="key-concepts.html"><a href="key-concepts.html#open-street-map"><i class="fa fa-check"></i><b>3.2</b> Open Street Map</a></li>
<li class="chapter" data-level="3.3" data-path="key-concepts.html"><a href="key-concepts.html#cycling-flows-from-the-pct"><i class="fa fa-check"></i><b>3.3</b> Cycling Flows from the PCT</a></li>
<li class="chapter" data-level="3.4" data-path="key-concepts.html"><a href="key-concepts.html#rate-limiting"><i class="fa fa-check"></i><b>3.4</b> Rate Limiting</a></li>
<li class="chapter" data-level="3.5" data-path="key-concepts.html"><a href="key-concepts.html#geometry-simplification"><i class="fa fa-check"></i><b>3.5</b> Geometry Simplification</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="layer-descriptions.html"><a href="layer-descriptions.html"><i class="fa fa-check"></i><b>4</b> Layer descriptions</a><ul>
<li class="chapter" data-level="4.1" data-path="layer-descriptions.html"><a href="layer-descriptions.html#existing-infrastructure"><i class="fa fa-check"></i><b>4.1</b> Existing infrastructure</a><ul>
<li class="chapter" data-level="4.1.1" data-path="layer-descriptions.html"><a href="layer-descriptions.html#cycle-infrastructure"><i class="fa fa-check"></i><b>4.1.1</b> Cycle infrastructure</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="layer-descriptions.html"><a href="layer-descriptions.html#speed-limits"><i class="fa fa-check"></i><b>4.2</b> Speed limits</a></li>
<li class="chapter" data-level="4.3" data-path="layer-descriptions.html"><a href="layer-descriptions.html#footways"><i class="fa fa-check"></i><b>4.3</b> Footways</a></li>
<li class="chapter" data-level="4.4" data-path="layer-descriptions.html"><a href="layer-descriptions.html#schemes"><i class="fa fa-check"></i><b>4.4</b> Schemes</a></li>
<li class="chapter" data-level="4.5" data-path="layer-descriptions.html"><a href="layer-descriptions.html#recommended-infrastructure"><i class="fa fa-check"></i><b>4.5</b> Recommended infrastructure</a></li>
<li class="chapter" data-level="4.6" data-path="layer-descriptions.html"><a href="layer-descriptions.html#road-widths"><i class="fa fa-check"></i><b>4.6</b> Road widths</a></li>
<li class="chapter" data-level="4.7" data-path="layer-descriptions.html"><a href="layer-descriptions.html#propensity-to-cycle-tool"><i class="fa fa-check"></i><b>4.7</b> Propensity to Cycle Tool</a></li>
<li class="chapter" data-level="4.8" data-path="layer-descriptions.html"><a href="layer-descriptions.html#traffic-counts"><i class="fa fa-check"></i><b>4.8</b> Traffic counts</a></li>
<li class="chapter" data-level="4.9" data-path="layer-descriptions.html"><a href="layer-descriptions.html#collisions-roads"><i class="fa fa-check"></i><b>4.9</b> Collisions roads</a></li>
<li class="chapter" data-level="4.10" data-path="layer-descriptions.html"><a href="layer-descriptions.html#collisions-junctions"><i class="fa fa-check"></i><b>4.10</b> Collisions junctions</a></li>
<li class="chapter" data-level="4.11" data-path="layer-descriptions.html"><a href="layer-descriptions.html#collisions-points"><i class="fa fa-check"></i><b>4.11</b> Collisions points</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="technical-details.html"><a href="technical-details.html"><i class="fa fa-check"></i><b>5</b> Technical details</a><ul>
<li class="chapter" data-level="5.1" data-path="technical-details.html"><a href="technical-details.html#data-preparation"><i class="fa fa-check"></i><b>5.1</b> Data Preparation</a></li>
<li class="chapter" data-level="5.2" data-path="technical-details.html"><a href="technical-details.html#cyipt-master-script"><i class="fa fa-check"></i><b>5.2</b> CyIPT Master Script</a></li>
<li class="chapter" data-level="5.3" data-path="technical-details.html"><a href="technical-details.html#settings"><i class="fa fa-check"></i><b>5.3</b> Settings</a></li>
<li class="chapter" data-level="5.4" data-path="technical-details.html"><a href="technical-details.html#regions-to-do"><i class="fa fa-check"></i><b>5.4</b> Regions to Do</a></li>
<li class="chapter" data-level="5.5" data-path="technical-details.html"><a href="technical-details.html#libraries"><i class="fa fa-check"></i><b>5.5</b> Libraries</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://cyipt.bike" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Cycling Infrastructure Prioritisation Toolkit: Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="technical-details" class="section level1">
<h1><span class="header-section-number">5</span> Technical details</h1>
<p>CyITP is developed in the R Programming language and is an open source project. The code is available at <a href="https://github.com/cyipt" class="uri">https://github.com/cyipt</a>. CyIPT consists of two main parts; the R based analysis code, and the website, which is a mixture of HTML/CSS/JavaScript with a PostgreSQL database accessed via a PHP-based API.</p>
<p>This manual focusses on the R based analysis code, as the website exists purely for visualisation and ease of use.</p>
<div id="data-preparation" class="section level2">
<h2><span class="header-section-number">5.1</span> Data Preparation</h2>
<p>CyIPT is reliant on some pre-existing datasets from third parties. While many of these are publically available, CyIPT required them to be pre-processed before use. These scripts are provided for context, but in most cases, users should download the pre-processed data directly from GitHub.</p>
</div>
<div id="cyipt-master-script" class="section level2">
<h2><span class="header-section-number">5.2</span> CyIPT Master Script</h2>
<p>The CyIPT master script <a href="https://github.com/cyipt/cyipt/blob/master/scripts/cyipt.R" class="uri">https://github.com/cyipt/cyipt/blob/master/scripts/cyipt.R</a> can be used to run the whole CyIPT process. It manages several global settings.</p>
</div>
<div id="settings" class="section level2">
<h2><span class="header-section-number">5.3</span> Settings</h2>
<p>Should the code skip regions that have already been done?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">overwrite</code></pre></div>
<p>Some stages overwrite existing files, for example by adding an extra column of data. Note that not overwriting may cause later stages to fail if they expect earlier stages results to be in the starting file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ncores</code></pre></div>
<p>Some functions use parallel processing how many clusters should be run? This should be less than the number of cores on your computer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">verbose</code></pre></div>
<p>Get extra messages and information while CyIPT is running.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all.regions</code></pre></div>
<p>Ignore the regions to do file and run for all regions.</p>
</div>
<div id="regions-to-do" class="section level2">
<h2><span class="header-section-number">5.4</span> Regions to Do</h2>
<p>If <code>all.regions = FALSE</code> CyIPT will choose which regions to run for based on the RegionsToDo file at <a href="https://github.com/cyipt/cyipt/blob/master/input-data/RegionsToDo.csv" class="uri">https://github.com/cyipt/cyipt/blob/master/input-data/RegionsToDo.csv</a></p>
<p>Placing <code>y</code> in the do column of this csv file will rerun the that region.</p>
<p>CyIPT uses the 2011 travel to work areas produces by the Office for National Statistics (ONS). However it could be changes to accept a different se to regions.</p>
</div>
<div id="libraries" class="section level2">
<h2><span class="header-section-number">5.5</span> Libraries</h2>
<p>CyIPT requires the following R libraries, which can be installed as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pkgs =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;sf&quot;</span>,
         <span class="st">&quot;osmdata&quot;</span>,
         <span class="st">&quot;stringr&quot;</span>,
         <span class="st">&quot;dplyr&quot;</span>,
         <span class="st">&quot;parallel&quot;</span>,
         <span class="st">&quot;xgboost&quot;</span>,
         <span class="st">&quot;igraph&quot;</span>,
         <span class="st">&quot;tmap&quot;</span>
         )</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(pkgs)</code></pre></div>
<p>and loaded as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">vapply</span>(pkgs, require, <span class="ot">TRUE</span>, <span class="dt">character.only =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>##       sf  osmdata  stringr    dplyr parallel  xgboost   igraph     tmap 
##     TRUE     TRUE     TRUE     TRUE     TRUE     TRUE     TRUE     TRUE</code></pre>

<div id="refs" class="references">
<div>
<p>Highways England. 2016. “Interim Advice Note 195/16: Cycle Traffic and the Strategic Road Network.” Interim 195/16. Highways England. <a href="http://www.standardsforhighways.co.uk/ha/standards/ians/pdfs/ian195.pdf" class="uri">http://www.standardsforhighways.co.uk/ha/standards/ians/pdfs/ian195.pdf</a>.</p>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="layer-descriptions.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cyipt/cyipt-website/edit/master/man/index.Rmd",
"text": "Edit"
},
"download": ["manual.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
